<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="游戏数据分析报告 - Mosuight">
    <meta name="keywords" content="游戏,数据分析,报告,统计,战绩">
    <title>数据分析报告 - Mosuight</title>
    <link rel="stylesheet" href="../Style/report.css">
    <!-- 添加Font Awesome图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- 页面标题 -->
        <div class="page-header">
            <h1 class="page-title">数据分析报告</h1>
            <p class="page-subtitle" id="report-date-range">报告周期: <span id="date-range-values">加载中...</span> · 基于 <span
                    id="battle-count">0</span> 条战绩分析</p>
            <button id="analysis-settings-btn" class="analysis-settings-btn">
                <i class="fas fa-cog"></i> 分析设置
            </button>
        </div>

        <!-- 战绩分析容器 -->
        <div class="battle-analysis card">
            <div class="section-header">
                <span class="section-title">
                    <span class="section-icon fas fa-chart-line"></span>
                    战绩分析
                </span>
            </div>

            <!-- 战绩分析卡片区域 -->
            <div class="analysis-cards">
                <div class="analysis-card">
                    <div class="card-header">
                        <div class="card-title">匹配环境</div>
                        <div class="analysis-icon"><i class="fas fa-balance-scale"></i></div>
                    </div>
                    <div class="card-content">
                        <div class="card-value" id="battle-environment">--</div>
                    </div>
                </div>

                <div class="analysis-card">
                    <div class="card-header">
                        <div class="card-title">玩家表现</div>
                        <div class="analysis-icon"><i class="fas fa-user-check"></i></div>
                    </div>
                    <div class="card-content">
                        <div class="card-value" id="player-performance">--</div>
                    </div>
                </div>

                <div class="analysis-card">
                    <div class="card-header">
                        <div class="card-title">匹配质量评分</div>
                        <div class="analysis-icon"><i class="fas fa-cloud-sun"></i></div>
                    </div>
                    <div class="card-content">
                        <div class="card-value" id="match-quality-score">--</div>
                    </div>
                </div>
            </div>

            <!-- 分析说明卡片 -->
            <div class="analysis-note">
                <div class="card-header">
                    <div class="card-title">分析说明</div>
                </div>
                <div class="card-content">
                    <p><strong>匹配环境</strong>：通过「玩家表现评分」与「匹配质量评分」的差值计算得出，核心反映当前对局与玩家的适配程度（即对局难度、对手实力是否与玩家水平匹配）。</p>
                    <p><strong>玩家表现评分</strong>：综合玩家在对局中的核心行为数据计算得出，包括带入的装备价值、击杀/助攻表现、经济收益效率等维度，用于精准衡量玩家的实际游戏表现水平。</p>
                    <p><strong>匹配质量评分</strong>：基于玩家历史表现及当前对局整体环境综合分析计算的分值，直接代表当前匹配池中对手的整体基础实力水平。</p>
                    <p>注：所有评分基于正常竞技行为计算，非官方数据，存在一定偏差，建议仅用于自身体验变化参考。</p>
                </div>
            </div>
        </div>

        <!-- 数据概览容器 -->
        <div class="data-overview card">
            <div class="section-header">
                <span class="section-title">
                    <span class="section-icon fas fa-tachometer-alt"></span>
                    数据概览
                </span>
            </div>

            <!-- 赛季组数据概览 -->
            <div class="overview-group season-group">
                <div class="group-title">赛季概览</div>
                <div class="overview-stats season-stats">
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="season-kill-ratio">0.0</div>
                            <div class="stat-label">总击杀比</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="season-escape-rate">0%</div>
                            <div class="stat-label">总撤离率</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="season-kill-efficiency">0.0</div>
                            <div class="stat-label">击杀效率</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="season-minute-income">0.0</div>
                            <div class="stat-label">分钟收益</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="season-precision-kills">0.0</div>
                            <div class="stat-label">精准击败</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 战绩组数据概览 -->
            <div class="overview-group battle-group">
                <div class="group-title">战绩概览</div>
                <div class="overview-stats">
                    <!-- 从用户角度优化的卡片顺序 -->
                    <!-- 第一行：核心财务指标 -->
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-max-single-loss-2">0.0</div>
                            <div class="stat-label">总体收益情况</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-total-gain">0.0</div>
                            <div class="stat-label">总体净收益</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-total-loss">0.0</div>
                            <div class="stat-label">总体亏损</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-escape-rate">0%</div>
                            <div class="stat-label">撤离概率</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-kill-ratio">0.0</div>
                            <div class="stat-label">击杀比值</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-minute-income">0.0</div>
                            <div class="stat-label">分钟收益</div>
                        </div>
                    </div>
                    <!-- 第二行：效率和极值指标 -->
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-kill-efficiency">0.0</div>
                            <div class="stat-label">击杀效率</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-profit-efficiency">0.0</div>
                            <div class="stat-label">收益效率</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-equipment-avg-price">0.0</div>
                            <div class="stat-label">装备均价</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-max-single-gain">0.0</div>
                            <div class="stat-label">单场最高收益</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-max-single-loss">0.0</div>
                            <div class="stat-label">单场最高亏损</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-value" id="battle-max-single-net-profit">0.0</div>
                            <div class="stat-label">单场最高净赚</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 地图数据容器 -->
        <div class="map-data card">
            <div class="section-header">
                <span class="section-title">
                    <span class="section-icon fas fa-map-marked-alt"></span>
                    地图数据
                </span>
            </div>
            <div class="map-data-content">
                <!-- 顶部布局：左侧大容器，右侧两个小容器 -->
                <div class="map-data-top">
                    <!-- 左侧：角色使用统计 -->
                    <div class="character-usage-stats">
                        <div class="stats-title">角色使用统计</div>
                        <div class="chart-container"></div>
                    </div>
                    <!-- 右侧：角色收益和亏损统计 -->
                    <div class="character-finance-stats">
                        <!-- 角色收益统计 -->
                        <div class="character-profit-stats">
                            <div class="stats-title">角色收益统计</div>
                            <div class="chart-container"></div>
                        </div>
                        <!-- 角色亏损统计 -->
                        <div class="character-loss-stats">
                            <div class="stats-title">角色亏损统计</div>
                            <div class="chart-container"></div>
                        </div>
                    </div>
                </div>
                <!-- 地图数据与带出频率 -->
                <div class="map-data-section">
                    <div class="stats-overview-header">
                        <h2>地图数据</h2>
                    </div>
                    <div class="map-cards-container">
                        <div class="map-card"
                            style="--map-bg-image: url('https://wegame.gtimg.com//g.2001918-r.ea725/helper/df/maps/a22168b2-853f-4d9f-96fd-6de1c789209f.jpg');">
                            <h3 class="map-card-title">巴克什</h3>
                            <div class="map-card-content">
                                <div class="map-stats">
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总盈亏数据</div>
                                        <div class="map-stat-value earnings" id="bakeshi-earnings">0</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总撤离率</div>
                                        <div class="map-stat-value evacuation" id="bakeshi-evacuation">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周金带出频率</div>
                                        <div class="map-stat-value probability" id="bakeshi-gold-prob">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周红带出频率</div>
                                        <div class="map-stat-value red-item" id="bakeshi-red-prob">0%</div>
                                    </div>
                                </div>
                                <div class="map-stats-note">带出频率 = 成功带出次数 ÷ 总场次，如需查看本周具体带出物品详情请查看本周收获统计页面（左侧导航栏爱心图标）</div>
                            </div>
                        </div>
                        <div class="map-card"
                            style="--map-bg-image: url('https://wegame.gtimg.com//g.2001918-r.ea725/helper/df/maps/0663196f-d646-4427-ad76-4609b93cd9ef.jpg');">
                            <h3 class="map-card-title">零号大坝</h3>
                            <div class="map-card-content">
                                <div class="map-stats">
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总盈亏数据</div>
                                        <div class="map-stat-value earnings" id="daba-earnings">0</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总撤离率</div>
                                        <div class="map-stat-value evacuation" id="daba-evacuation">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周金带出频率</div>
                                        <div class="map-stat-value probability" id="daba-gold-prob">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周红带出频率</div>
                                        <div class="map-stat-value red-item" id="daba-red-prob">0%</div>
                                    </div>
                                </div>
                                <div class="map-stats-note">带出频率 = 成功带出次数 ÷ 总场次，如需查看本周具体带出物品详情请查看本周收获统计页面（左侧导航栏爱心图标）</div>
                            </div>
                        </div>
                        <div class="map-card"
                            style="--map-bg-image: url('https://wegame.gtimg.com//g.2001918-r.ea725/helper/df/maps/fc46e56b-ff72-4b27-96f9-02f0882e54e4.jpg');">
                            <h3 class="map-card-title">长弓溪谷</h3>
                            <div class="map-card-content">
                                <div class="map-stats">
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总盈亏数据</div>
                                        <div class="map-stat-value earnings" id="changgong-earnings">0</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总撤离率</div>
                                        <div class="map-stat-value evacuation" id="changgong-evacuation">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周金带出频率</div>
                                        <div class="map-stat-value probability" id="changgong-gold-prob">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周红带出频率</div>
                                        <div class="map-stat-value red-item" id="changgong-red-prob">0%</div>
                                    </div>
                                </div>
                                <div class="map-stats-note">带出频率 = 成功带出次数 ÷ 总场次，如需查看本周具体带出物品详情请查看本周收获统计页面（左侧导航栏爱心图标）</div>
                            </div>
                        </div>
                        <div class="map-card"
                            style="--map-bg-image: url('https://wegame.gtimg.com//g.2001918-r.ea725/helper/df/maps/42f59871-ae7d-4067-82c8-5670bae00464.jpg');">
                            <h3 class="map-card-title">航天基地</h3>
                            <div class="map-card-content">
                                <div class="map-stats">
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总盈亏数据</div>
                                        <div class="map-stat-value earnings" id="hangtian-earnings">0</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总撤离率</div>
                                        <div class="map-stat-value evacuation" id="hangtian-evacuation">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周金带出频率</div>
                                        <div class="map-stat-value probability" id="hangtian-gold-prob">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周红带出频率</div>
                                        <div class="map-stat-value red-item" id="hangtian-red-prob">0%</div>
                                    </div>
                                </div>
                                <div class="map-stats-note">带出频率 = 成功带出次数 ÷ 总场次，如需查看本周具体带出物品详情请查看本周收获统计页面（左侧导航栏爱心图标）</div>
                            </div>
                        </div>
                        <div class="map-card"
                            style="--map-bg-image: url('https://wegame.gtimg.com//g.2001918-r.ea725/helper/df/maps/cxjyjm20211.webp');">
                            <h3 class="map-card-title">潮汐监狱</h3>
                            <div class="map-card-content">
                                <div class="map-stats">
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总盈亏数据</div>
                                        <div class="map-stat-value earnings" id="chaoxi-earnings">0</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">总撤离率</div>
                                        <div class="map-stat-value evacuation" id="chaoxi-evacuation">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周金带出频率</div>
                                        <div class="map-stat-value probability" id="chaoxi-gold-prob">0%</div>
                                    </div>
                                    <div class="map-stat-item">
                                        <div class="map-stat-label">本周红带出频率</div>
                                        <div class="map-stat-value red-item" id="chaoxi-red-prob">0%</div>
                                    </div>
                                </div>
                                <div class="map-stats-note">带出频率 = 成功带出次数 ÷ 总场次，如需查看本周具体带出物品详情请查看本周收获统计页面（左侧导航栏爱心图标）</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 玩家趋势容器 -->
        <div class="player-trends card">
            <div class="section-header">
                <span class="section-title">
                    <span class="section-icon fas fa-arrow-trend-up"></span>
                    玩家趋势
                </span>
            </div>

            <!-- 玩家表现趋势容器 -->
            <div class="trend-container player-performance-trend">
                <div class="trend-title">玩家表现趋势</div>
                <div class="trend-chart-container"></div>
                <div class="trend-note">
                    <div class="trend-note-header">核心指标：单局表现分（P）、趋势分（Trend_P）</div>
                    <p class="trend-note-content">综合战绩中所有参数的评分，趋势反映长期实力变化。其中单局表现分为实际玩家表现，趋势分是系统认为你该有的表现。</p>
                </div>
            </div>

            <!-- 匹配质量分容器 -->
            <div class="trend-container match-quality-score">
                <div class="trend-title">匹配质量分</div>
                <div class="trend-chart-container"></div>
                <div class="trend-note">
                    <div class="trend-note-header">核心指标：单局质量分（Q）、趋势分（Trend_Q）</div>
                    <p class="trend-note-content">基于表现分的对局难度评分，分数越高难度越大，趋势分体现匹配难度变化。单局质量分为实际匹配的单局质量分，趋势分为系统匹配分。</p>
                </div>
            </div>

            <!-- 行为变化趋势容器 -->
            <div class="trend-container behavior-change-trend">
                <div class="trend-title">行为变化趋势（滑动窗口分析）</div>
                <div class="trend-chart-container"></div>
                <div class="trend-note">
                    <div class="trend-note-header">核心指标：战斗效能、资源生存指标</div>
                    <p class="trend-note-content">按 10 局为窗口分析，前者看战斗能力，后者看生存 / 装备管理，突变会标记。</p>
                </div>
            </div>

            <!-- 收益趋势容器 -->
            <div class="trend-container profit-trend">
                <div class="trend-title">收益趋势</div>
                <div class="trend-chart-container"></div>
            </div>

            <!-- 撤离率趋势容器 -->
            <div class="trend-container escape-rate-trend">
                <div class="trend-title">撤离率趋势</div>
                <div class="trend-chart-container"></div>
            </div>

            <!-- 收益比趋势容器 -->
            <div class="trend-container profit-ratio-trend">
                <div class="trend-title">收益比趋势</div>
                <div class="trend-chart-container"></div>
            </div>
        </div>

        <script src="../../Asset/Resource/Libs/echarts.min.js"></script>
        <script src="../JavaScript/report.Js"></script>
        <script src="../JavaScript/calculate.Js"></script>
    </div>
    <!-- 无数据模态框 - 默认隐藏 -->
    <div id="no-data-overlay" class="modal-overlay" style="display: none;">
        <div id="no-data-modal" class="modal-content">
            <h3 class="modal-title">暂无战绩数据</h3>
            <p class="modal-message">没有战绩记录，请前往我的战绩页面拉取战绩信息</p>
        </div>
    </div>

    <div id="analysis-settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">分析设置</h2>
            <div class="modal-body">
                <div class="form-group">
                    <label for="start-date">开始日期:</label>
                    <input type="date" id="start-date">
                </div>
                <div class="form-group">
                    <label for="end-date">结束日期:</label>
                    <input type="date" id="end-date">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-btn" class="btn btn-secondary">取消</button>
                <button id="confirm-btn" class="btn btn-primary">确认</button>
            </div>
        </div>
    </div>
</body>

</html>